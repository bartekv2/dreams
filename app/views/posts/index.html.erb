<div class="w-full">
  <% if !flash.empty? %>
    <% flash.each do |key, value| %>
      <%= content_tag :div, value, class: "flash #{key}" %>
    <% end %>
  <% end %>
  <%= get_header_info(@user) %>
  <% if @posts.count == 0 %>
    <%= "Nothing here yet." %>
  <% end %>
  <% @posts.each do |post| %>
    <section class="pb-4">
      <div class="border-b border-indigo-300 pb-2 md:pb-6">
        <article>
          <h3 class="mb-2"><%= link_to post.title, post %></h3>
          <%= simple_format truncate(post.content, length: 250) { link_to " read more", post } %>
          <div class="text-base text-gray-500 mt-2"><%= get_author_and_time(post) %></div>
        </article>
        <div class="relative">
          <% if (user_signed_in? && current_user.id == post.user_id) || current_user.try(:admin?) %>
            <div class="md:absolute flex justify-end mt-2 md:-mt-4 right-0 top-0 flex">
              <% if post.private %><span class="inline-block font-bold bg-gray-200 text-gray-700 text-xs px-4 py-2 mr-4 md:mr-0 rounded">Private</span><% end %>
              <%= link_to "Edit", edit_post_path(post), method: :get, :class => "btn btn-small md:ml-4 mr-4 inline-block" %>
              <%= link_to "Delete", post_path(post), method: :delete, data: { confirm: "Are you sure?" }, :class => "btn btn-small del inline-block" %>
            </div>
          <% end %>
        </div>
      </div>
    </section>
  <% end %>
  <%= paginate @posts %>
</div>
